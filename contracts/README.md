# VA Contract Tools

These are tools for processing and analyzing VA contracts.

## Usage: process_contracts.py

This script processes PDF contracts found in the `azure_pdfs` directory, extracts text, analyzes them using an LLM, and outputs the results to `contract_analysis.csv`.

**Basic Usage:**

```bash
python process_contracts.py
```

**Environment Variables:**

Make sure you have a `.env.local` file in the same directory with the necessary API keys:

*   `openai_api_key`: Your Azure OpenAI API key (used by default).
*   `openai_api_key_smart`: Your standard OpenAI API key (used with `--smart-mode`).

**Command-line Options:**

*   `--smart-mode`: Use the standard OpenAI client (`o3-mini` model) instead of the default Azure OpenAI client (`gpt-4o` model). Requires `openai_api_key_smart` to be set in `.env.local`.
*   `--second-pass-only`: Skip the initial data extraction (pass 1) and only perform the munchable analysis (pass 2) on existing results in `contract_analysis.csv`.
*   `--test-mode`: Run the script on a small batch of 3 files for testing purposes.
*   `--batch-size <NUMBER>`: Specify the number of contracts to process in each batch (default: 25).

**Example:**

Run in smart mode with a batch size of 10:

```bash
python process_contracts.py --smart-mode --batch-size 10
```

Run only the second pass analysis:

```bash
python process_contracts.py --second-pass-only
```

## Usage: analyze_contracts.py

This script reads the `contract_analysis.csv` file generated by `process_contracts.py`, cleans currency data, and performs analysis to calculate total contract values, FY25 values, and vendor rankings. It outputs the analysis both to the console and to a timestamped text file (e.g., `contract_analysis_YYYYMMDD_HHMMSS.txt`).

**Basic Usage:**

```bash
python analyze_contracts.py
```

The script reads `contract_analysis.csv` from the current directory and outputs the analysis file to the same directory. It first provides an analysis of all contracts and then a separate analysis for contracts marked as "munchable".
